name: run_a_program
# description:  Sample workflow demonstrating how to run an OpenEdge program with kenherring/openedge-actions/run

on:
  pull_request:
    branches:
      - main
  push:
    branches:
      - main

jobs:
  run_a_program:
    name: run_a_program samples
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v5

      ## Example 1: Simply run a program
      ## * the `run` action will automatically call `setup` if no OpenEdge installation is detected
      - uses: kenherring/openedge-actions/run@a6b6281fd7a1c4eaada1f93ccd9e4e4f61697677
        with:
          license: ${{ secrets.PROGRESS_CFG }}
          startup-procedure: run_a_program/source_program.p

      # ## Example 2: Set the propath to a subdirectory, and run a program relative to that subdirectory
      - uses: kenherring/openedge-actions/run@a6b6281fd7a1c4eaada1f93ccd9e4e4f61697677
        with:
          license: ${{ secrets.PROGRESS_CFG }}
          propath: 'run_a_program'
          # startup-procedure: source_program.p ## TODO
          startup-procedure: run_a_program/source_program.p ## this should theoretically fail
